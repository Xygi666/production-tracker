<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2c3e50">
    <meta name="description" content="–£—á—ë—Ç –ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ —Å —Ä–∞—Å—á—ë—Ç–æ–º –∑–∞—Ä–ø–ª–∞—Ç—ã">
    <title>–£—á—ë—Ç –ø—Ä–æ–¥—É–∫—Ü–∏–∏ 2</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
    <div id="app" class="app">
        <!-- –®–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
        <header class="header">
            <div class="header__container">
                <div class="header__brand">
                    <h1 class="header__title">üìä –£—á—ë—Ç –ø—Ä–æ–¥—É–∫—Ü–∏–∏ 2</h1>
                </div>
                <div class="header__actions">
                    <button class="btn btn--sm btn--outline" id="settingsBtn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="btn btn--sm btn--outline" id="exportJsonBtn">üíæ –≠–∫—Å–ø–æ—Ä—Ç</button>
                    <button class="btn btn--sm btn--outline" id="reloadBtn">üîÑ</button>
                </div>
            </div>
        </header>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="nav">
            <div class="nav__container">
                <button class="nav__tab nav__tab--active" data-tab="records">üìù –£—á—ë—Ç</button>
                <button class="nav__tab" data-tab="statistics">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <button class="nav__tab" data-tab="history">üìã –ò—Å—Ç–æ—Ä–∏—è</button>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main">
            <div class="main__container">
                <!-- –≠–∫—Ä–∞–Ω –£—á—ë—Ç -->
                <section class="screen screen--active" data-screen="records">
                    <div class="records">
                        <div class="record-form">
                            <div class="form-group">
                                <label for="productSelect">–ü—Ä–æ–¥—É–∫—Ç</label>
                                <div class="select-wrapper">
                                    <select id="productSelect" class="form-control">
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç</option>
                                    </select>
                                    <div class="select-icon">‚ñº</div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="quantityInput">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                                <div class="quantity-control">
                                    <button type="button" class="btn btn--round" id="decreaseBtn">‚àí</button>
                                    <input type="number" id="quantityInput" class="form-control" 
                                           step="0.01" min="0.01" placeholder="0">
                                    <button type="button" class="btn btn--round" id="increaseBtn">+</button>
                                </div>
                            </div>

                            <div class="presets" id="presetsContainer">
                                <!-- –ü—Ä–µ—Å–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>

                            <div class="form-group">
                                <div class="sum-display">
                                    <span>–°—É–º–º–∞: </span>
                                    <span class="sum-amount" id="sumAmount">0 ‚ÇΩ</span>
                                </div>
                            </div>

                            <button type="button" class="btn btn--primary btn--full" id="addRecordBtn">
                                –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
                            </button>
                        </div>

                        <div class="records-summary">
                            <div class="summary-cards">
                                <div class="summary-card">
                                    <div class="summary-value" id="todayCount">0</div>
                                    <div class="summary-label">–ó–∞–ø–∏—Å–µ–π –∑–∞ –¥–µ–Ω—å</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-value" id="monthSum">0 ‚ÇΩ</div>
                                    <div class="summary-label">–î–æ—Ö–æ–¥ –∑–∞ –º–µ—Å—è—Ü</div>
                                </div>
                            </div>
                        </div>

                        <div class="records-list">
                            <div class="list-header">
                                <h3>–ó–∞–ø–∏—Å–∏ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞</h3>
                                <button class="btn btn--sm btn--outline" id="exportCsvBtn">üìä –≠–∫—Å–ø–æ—Ä—Ç CSV</button>
                            </div>
                            <div class="records-items" id="recordsList">
                                <!-- –ó–∞–ø–∏—Å–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- –≠–∫—Ä–∞–Ω –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <section class="screen" data-screen="statistics">
                    <div class="statistics">
                        <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</h2>
                        <div class="stats-grid" id="statsGrid">
                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </section>

                <!-- –≠–∫—Ä–∞–Ω –ò—Å—Ç–æ—Ä–∏—è -->
                <section class="screen" data-screen="history">
                    <div class="history">
                        <div class="history-header">
                            <h2>–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h2>
                            <div class="history-filters">
                                <input type="date" id="filterDate" class="form-control">
                                <select id="filterAction" class="form-control">
                                    <option value="">–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è</option>
                                    <option value="add_record">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏</option>
                                    <option value="delete_record">–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏</option>
                                    <option value="add_product">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞</option>
                                    <option value="settings">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫</option>
                                </select>
                                <button class="btn btn--sm btn--outline" id="exportHistoryBtn">üìÑ –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏</button>
                            </div>
                        </div>
                        <div class="history-list" id="historyList">
                            <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="modal" id="settingsModal">
        <div class="modal__backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <button class="modal__close" id="closeSettingsBtn">√ó</button>
            </div>
            <div class="modal__body">
                <div class="settings-tabs">
                    <button class="settings-tab settings-tab--active" data-tab="salary">–ó–∞—Ä–ø–ª–∞—Ç–∞</button>
                    <button class="settings-tab" data-tab="products">–ü—Ä–æ–¥—É–∫—Ç—ã</button>
                    <button class="settings-tab" data-tab="general">–û–±—â–∏–µ</button>
                    <button class="settings-tab" data-tab="backup">–ë—ç–∫–∞–ø</button>
                </div>

                <div class="settings-content">
                    <!-- –í–∫–ª–∞–¥–∫–∞ –ó–∞—Ä–ø–ª–∞—Ç–∞ -->
                    <div class="settings-panel settings-panel--active" data-panel="salary">
                        <div class="form-group">
                            <label for="baseSalary">–û–∫–ª–∞–¥ (‚ÇΩ)</label>
                            <input type="number" id="baseSalary" class="form-control" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label for="taxRate">–ù–∞–ª–æ–≥ (%)</label>
                            <input type="number" id="taxRate" class="form-control" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="advanceAmount">–ê–≤–∞–Ω—Å (‚ÇΩ)</label>
                            <input type="number" id="advanceAmount" class="form-control" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label for="workSchedule">–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</label>
                            <select id="workSchedule" class="form-control">
                                <option value="2/2">2 —á–µ—Ä–µ–∑ 2</option>
                                <option value="5/2">5 —á–µ—Ä–µ–∑ 2</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="hoursPerShift">–ß–∞—Å–æ–≤ –∑–∞ —Å–º–µ–Ω—É</label>
                            <input type="number" id="hoursPerShift" class="form-control" min="1" max="24" step="0.5">
                        </div>
                        <div class="form-group">
                            <label for="scheduleStartDate">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –≥—Ä–∞—Ñ–∏–∫–∞</label>
                            <input type="date" id="scheduleStartDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="normHoursPerMonth">–ù–æ—Ä–º–æ—á–∞—Å—ã –º–µ—Å—è—Ü–∞</label>
                            <input type="number" id="normHoursPerMonth" class="form-control" min="0" step="0.5">
                        </div>
                    </div>

                    <!-- –í–∫–ª–∞–¥–∫–∞ –ü—Ä–æ–¥—É–∫—Ç—ã -->
                    <div class="settings-panel" data-panel="products">
                        <div class="products-header">
                            <button class="btn btn--primary" id="addProductBtn">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</button>
                            <button class="btn btn--outline" id="importProductsBtn">–ò–º–ø–æ—Ä—Ç CSV</button>
                            <input type="file" id="importProductsFile" accept=".csv" style="display:none">
                        </div>
                        <div class="products-list" id="productsList">
                            <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>

                    <!-- –í–∫–ª–∞–¥–∫–∞ –û–±—â–∏–µ -->
                    <div class="settings-panel" data-panel="general">
                        <div class="form-group">
                            <label for="themeSelect">–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</label>
                            <select id="themeSelect" class="form-control">
                                <option value="classic">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è</option>
                                <option value="dark">–¢—ë–º–Ω–∞—è</option>
                                <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="presetsInput">–ü—Ä–µ—Å–µ—Ç—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                            <input type="text" id="presetsInput" class="form-control" placeholder="1,5,10,25,50">
                        </div>
                        <div class="form-group">
                            <label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
                            <select class="form-control">
                                <option value="ru" selected>–†—É—Å—Å–∫–∏–π</option>
                            </select>
                        </div>
                    </div>

                    <!-- –í–∫–ª–∞–¥–∫–∞ –ë—ç–∫–∞–ø -->
                    <div class="settings-panel" data-panel="backup">
                        <div class="backup-section">
                            <h4>–†—É—á–Ω–æ–π –±—ç–∫–∞–ø</h4>
                            <div class="backup-buttons">
                                <button class="btn btn--outline" id="emailBackupBtn">üìß Email</button>
                                <button class="btn btn--outline" id="yandexBackupBtn">‚òÅÔ∏è –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫</button>
                                <button class="btn btn--outline" id="googleBackupBtn">üìÅ Google Drive</button>
                            </div>
                        </div>

                        <div class="backup-section">
                            <h4>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø</h4>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="autoBackupEnabled">
                                    <span>–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø</span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label for="backupPeriod">–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å</label>
                                <select id="backupPeriod" class="form-control">
                                    <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                                    <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                                    <option value="monthly">–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="backupService">–°–µ—Ä–≤–∏—Å</label>
                                <select id="backupService" class="form-control">
                                    <option value="email">Email</option>
                                    <option value="yandex">–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫</option>
                                    <option value="google">Google Drive</option>
                                </select>
                            </div>
                        </div>

                        <div class="backup-section">
                            <h4>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</h4>
                            <button class="btn btn--outline" id="restoreBackupBtn">üìÇ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞</button>
                            <input type="file" id="restoreBackupFile" accept=".json" style="display:none">
                        </div>

                        <div class="backup-history">
                            <h4>–ò—Å—Ç–æ—Ä–∏—è –±—ç–∫–∞–ø–æ–≤</h4>
                            <div id="backupHistoryList" class="backup-history-list">
                                <!-- –ò—Å—Ç–æ—Ä–∏—è –±—ç–∫–∞–ø–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--primary" id="saveSettingsBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn btn--outline" id="cancelSettingsBtn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div class="modal" id="confirmModal">
        <div class="modal__backdrop"></div>
        <div class="modal__content modal__content--sm">
            <div class="modal__header">
                <h3 id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ</h3>
            </div>
            <div class="modal__body">
                <p id="confirmMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ?</p>
            </div>
            <div class="modal__footer">
                <button class="btn btn--danger" id="confirmYesBtn">–î–∞</button>
                <button class="btn btn--outline" id="confirmNoBtn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="work-schedule.js"></script>
    <script src="backup.js"></script>
    <script src="app.js"></script>

    <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(function(registration) {
                        console.log('SW registered: ', registration);
                    }, function(registrationError) {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>